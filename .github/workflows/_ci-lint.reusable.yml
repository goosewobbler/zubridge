name: Lint
description: 'Runs code quality checks across the codebase'

on:
  workflow_call:
    inputs:
      cache_key:
        description: 'Cache key to use for downloading artifacts'
        required: false
        type: string

env:
  TURBO_TELEMETRY_DISABLED: 1

jobs:
  lint:
    name: Code Quality
    runs-on: ubuntu-latest
    timeout-minutes: 10
    steps:
      # Standard checkout
      - name: 📥 Checkout Repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # Set up Node.js and PNPM
      - name: 🛠️ Setup Development Environment
        uses: ./.github/workflows/actions/setup-workspace
        with:
          node-version: '20'

      # Download the pre-built packages from the build job
      - name: 📦 Download Build Artifacts
        uses: ./.github/workflows/actions/download-archive
        with:
          name: zubridge
          path: zubridge-build
          filename: artifact.zip
          cache_key_prefix: zubridge-build
          exact_cache_key: ${{ inputs.cache_key }}

      # Run Linting checks
      - name: 🔍 Run Linting
        run: pnpm run lint
        shell: bash
